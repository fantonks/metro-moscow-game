# Сборка и запуск — пошагово

## 1. Чистый запуск на другом ПК

Требования: **Node.js 18+** ([nodejs.org](https://nodejs.org)).

```bash
# Клонирование (или распаковка архива)
git clone <url> metro-game
cd metro-game

# Одна команда — установка и запуск
npm install
npm run dev
```

В браузере открыть **http://localhost:3000**.

---

## 2. Запуск из архива

1. Распаковать архив в любую папку (без кириллицы и пробелов в пути — желательно).
2. Открыть терминал в этой папке.
3. Выполнить:
   ```bash
   npm install
   npm run dev
   ```
4. Открыть **http://localhost:3000**.

---

## 3. Запуск без интернета (офлайн)

- После первого `npm install` и `npm run build` приложение можно запускать без сети:
  ```bash
  npm run build
  npm run start
  ```
- Открыть **http://localhost:3000** на этом же компьютере или в локальной сети (если доступ разрешён).

Фото станций и карты лежат в `public/`, запросы к API не обязательны для базового прохождения.

---

## 4. Production-сборка (деплой или раздача)

```bash
npm install
npm run build
npm run start
```

Сервер слушает порт 3000. Для другого порта: `PORT=3001 npm run start` (Linux/macOS) или `set PORT=3001 && npm run start` (Windows).

---

## 5. Windows — батники

- **start.bat** — проверка Node.js, при необходимости `npm install`, затем `npm run dev`.
- **start-webpack.bat** — то же, но `npm run dev:webpack` (если из-за Turbopack возникает EPERM).

Запуск: двойной клик по `start.bat`. Убедиться, что Node.js установлен и добавлен в PATH.

---

## 6. Мобильные устройства

Открыть в браузере тот же URL, что и на ПК (например **http://IP-компьютера:3000**, если в одной сети). Интерфейс адаптивный.

---

## 7. Если кнопка «Начать» не срабатывает

- Открыть консоль браузера (F12 → Console). Ошибки логируются с префиксами `[MetroGame]`, `[game-store]`, `[sound]`.
- Убедиться, что не блокируются скрипты и localStorage.
- Попробовать в режиме инкогнито или другой браузер (Chrome, Firefox, Edge).

---

## 8. Desktop-игра (Windows .exe)

1. Установить зависимости: `npm install`
2. Собрать установщик: `npm run pack:win`
3. В папке **dist-electron/** появится установщик (например `Метро Москвы Setup x.x.x.exe`)
4. Установить и запускать двойным кликом. Игра работает **offline**, все изображения и прогресс — локально.

Проверка без установщика: после `npm run build:electron` запустить `npm run electron` — откроется окно приложения (должна существовать папка `out/`).
